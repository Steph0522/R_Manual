name: Build and Deploy Bookdown

on:
  push:
    branches:
      - main  # Cambia si usas otro branch principal

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: 📥 Clonar el repositorio
        uses: actions/checkout@v3

      - name: 🔧 Instalar R y dependencias
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.3'

      - name: 📦 Instalar paquetes necesarios
        run: |
          Rscript -e 'install.packages(c("remotes", "bookdown"))'

      - name: 🏗️ Construir el sitio Bookdown
        run: Rscript -e 'bookdown::render_book("index.Rmd", "bookdown::gitbook")'

      - name: 🚀 Desplegar en GitHub Pages
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages  # Donde se publicará el sitio
          folder: _book  # Carpeta donde Bookdown genera el HTML
